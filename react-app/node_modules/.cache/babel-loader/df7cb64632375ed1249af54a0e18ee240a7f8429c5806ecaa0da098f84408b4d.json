{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\seba\\\\Documents\\\\pagina\\\\react-app\\\\src\\\\context\\\\CartContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport React, { createContext, useContext, useEffect, useReducer } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartStateContext = /*#__PURE__*/createContext();\nconst CartDispatchContext = /*#__PURE__*/createContext();\nconst STORAGE_KEY = \"levelup_cart_v1\";\nfunction cartReducer(state, action) {\n  switch (action.type) {\n    case \"initialize\":\n      return action.payload || [];\n    case \"add\":\n      {\n        const item = action.payload;\n        const idx = state.findIndex(i => i.id === item.id);\n        if (idx >= 0) {\n          const next = state.slice();\n          next[idx] = {\n            ...next[idx],\n            qty: next[idx].qty + (item.qty || 1)\n          };\n          return next;\n        }\n        return [...state, {\n          ...item,\n          qty: item.qty || 1\n        }];\n      }\n    case \"remove\":\n      return state.filter(i => i.id !== action.payload);\n    case \"updateQty\":\n      {\n        const {\n          id,\n          qty\n        } = action.payload;\n        return state.map(i => i.id === id ? {\n          ...i,\n          qty\n        } : i);\n      }\n    case \"clear\":\n      return [];\n    default:\n      return state;\n  }\n}\nexport function CartProvider({\n  children\n}) {\n  _s();\n  const [state, dispatch] = useReducer(cartReducer, []);\n\n  // initialize from storage\n  useEffect(() => {\n    try {\n      const raw = localStorage.getItem(STORAGE_KEY);\n      if (raw) dispatch({\n        type: \"initialize\",\n        payload: JSON.parse(raw)\n      });\n    } catch (e) {\n      console.warn(\"Failed to load cart from localStorage\", e);\n    }\n  }, []);\n\n  // persist on change\n  useEffect(() => {\n    try {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));\n    } catch (e) {\n      console.warn(\"Failed to save cart to localStorage\", e);\n    }\n  }, [state]);\n  return /*#__PURE__*/_jsxDEV(CartDispatchContext.Provider, {\n    value: dispatch,\n    children: /*#__PURE__*/_jsxDEV(CartStateContext.Provider, {\n      value: state,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n_s(CartProvider, \"bvwMX2dLV1mpx4qg0VQItmezWQ8=\");\n_c = CartProvider;\nexport function useCartState() {\n  _s2();\n  const ctx = useContext(CartStateContext);\n  if (ctx === undefined) throw new Error(\"useCartState must be used within CartProvider\");\n  return ctx;\n}\n_s2(useCartState, \"/dMy7t63NXD4eYACoT93CePwGrg=\");\nexport function useCartDispatch() {\n  _s3();\n  const ctx = useContext(CartDispatchContext);\n  if (ctx === undefined) throw new Error(\"useCartDispatch must be used within CartProvider\");\n  return ctx;\n}\n_s3(useCartDispatch, \"/dMy7t63NXD4eYACoT93CePwGrg=\");\nexport function useCart() {\n  _s4();\n  const state = useCartState();\n  const dispatch = useCartDispatch();\n  const addItem = item => dispatch({\n    type: \"add\",\n    payload: item\n  });\n  const removeItem = id => dispatch({\n    type: \"remove\",\n    payload: id\n  });\n  const updateQty = (id, qty) => dispatch({\n    type: \"updateQty\",\n    payload: {\n      id,\n      qty\n    }\n  });\n  const clearCart = () => dispatch({\n    type: \"clear\"\n  });\n  const total = state.reduce((s, it) => s + (it.precio || 0) * (it.qty || 1), 0);\n  return {\n    cart: state,\n    addItem,\n    removeItem,\n    updateQty,\n    clearCart,\n    total\n  };\n}\n\n// no default export; use named hooks: useCart, useCartState, useCartDispatch, CartProvider\n_s4(useCart, \"8Z33f4vmO3m+d8Qc46G2+SLSGNY=\", false, function () {\n  return [useCartState, useCartDispatch];\n});\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useReducer","jsxDEV","_jsxDEV","CartStateContext","CartDispatchContext","STORAGE_KEY","cartReducer","state","action","type","payload","item","idx","findIndex","i","id","next","slice","qty","filter","map","CartProvider","children","_s","dispatch","raw","localStorage","getItem","JSON","parse","e","console","warn","setItem","stringify","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useCartState","_s2","ctx","undefined","Error","useCartDispatch","_s3","useCart","_s4","addItem","removeItem","updateQty","clearCart","total","reduce","s","it","precio","cart","$RefreshReg$"],"sources":["C:/Users/seba/Documents/pagina/react-app/src/context/CartContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useEffect, useReducer } from \"react\";\r\n\r\nconst CartStateContext = createContext();\r\nconst CartDispatchContext = createContext();\r\n\r\nconst STORAGE_KEY = \"levelup_cart_v1\";\r\n\r\nfunction cartReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"initialize\":\r\n      return action.payload || [];\r\n    case \"add\": {\r\n      const item = action.payload;\r\n      const idx = state.findIndex((i) => i.id === item.id);\r\n      if (idx >= 0) {\r\n        const next = state.slice();\r\n        next[idx] = { ...next[idx], qty: next[idx].qty + (item.qty || 1) };\r\n        return next;\r\n      }\r\n      return [...state, { ...item, qty: item.qty || 1 }];\r\n    }\r\n    case \"remove\":\r\n      return state.filter((i) => i.id !== action.payload);\r\n    case \"updateQty\": {\r\n      const { id, qty } = action.payload;\r\n      return state.map((i) => (i.id === id ? { ...i, qty } : i));\r\n    }\r\n    case \"clear\":\r\n      return [];\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport function CartProvider({ children }) {\r\n  const [state, dispatch] = useReducer(cartReducer, []);\r\n\r\n  // initialize from storage\r\n  useEffect(() => {\r\n    try {\r\n      const raw = localStorage.getItem(STORAGE_KEY);\r\n      if (raw) dispatch({ type: \"initialize\", payload: JSON.parse(raw) });\r\n    } catch (e) {\r\n      console.warn(\"Failed to load cart from localStorage\", e);\r\n    }\r\n  }, []);\r\n\r\n  // persist on change\r\n  useEffect(() => {\r\n    try {\r\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));\r\n    } catch (e) {\r\n      console.warn(\"Failed to save cart to localStorage\", e);\r\n    }\r\n  }, [state]);\r\n\r\n  return (\r\n    <CartDispatchContext.Provider value={dispatch}>\r\n      <CartStateContext.Provider value={state}>\r\n        {children}\r\n      </CartStateContext.Provider>\r\n    </CartDispatchContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useCartState() {\r\n  const ctx = useContext(CartStateContext);\r\n  if (ctx === undefined) throw new Error(\"useCartState must be used within CartProvider\");\r\n  return ctx;\r\n}\r\n\r\nexport function useCartDispatch() {\r\n  const ctx = useContext(CartDispatchContext);\r\n  if (ctx === undefined) throw new Error(\"useCartDispatch must be used within CartProvider\");\r\n  return ctx;\r\n}\r\n\r\nexport function useCart() {\r\n  const state = useCartState();\r\n  const dispatch = useCartDispatch();\r\n\r\n  const addItem = (item) => dispatch({ type: \"add\", payload: item });\r\n  const removeItem = (id) => dispatch({ type: \"remove\", payload: id });\r\n  const updateQty = (id, qty) => dispatch({ type: \"updateQty\", payload: { id, qty } });\r\n  const clearCart = () => dispatch({ type: \"clear\" });\r\n\r\n  const total = state.reduce((s, it) => s + (it.precio || 0) * (it.qty || 1), 0);\r\n\r\n  return { cart: state, addItem, removeItem, updateQty, clearCart, total };\r\n}\r\n\r\n// no default export; use named hooks: useCart, useCartState, useCartDispatch, CartProvider\r\n"],"mappings":";;;;;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,SAAS,EAAEC,UAAU,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhF,MAAMC,gBAAgB,gBAAGN,aAAa,CAAC,CAAC;AACxC,MAAMO,mBAAmB,gBAAGP,aAAa,CAAC,CAAC;AAE3C,MAAMQ,WAAW,GAAG,iBAAiB;AAErC,SAASC,WAAWA,CAACC,KAAK,EAAEC,MAAM,EAAE;EAClC,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAK,YAAY;MACf,OAAOD,MAAM,CAACE,OAAO,IAAI,EAAE;IAC7B,KAAK,KAAK;MAAE;QACV,MAAMC,IAAI,GAAGH,MAAM,CAACE,OAAO;QAC3B,MAAME,GAAG,GAAGL,KAAK,CAACM,SAAS,CAAEC,CAAC,IAAKA,CAAC,CAACC,EAAE,KAAKJ,IAAI,CAACI,EAAE,CAAC;QACpD,IAAIH,GAAG,IAAI,CAAC,EAAE;UACZ,MAAMI,IAAI,GAAGT,KAAK,CAACU,KAAK,CAAC,CAAC;UAC1BD,IAAI,CAACJ,GAAG,CAAC,GAAG;YAAE,GAAGI,IAAI,CAACJ,GAAG,CAAC;YAAEM,GAAG,EAAEF,IAAI,CAACJ,GAAG,CAAC,CAACM,GAAG,IAAIP,IAAI,CAACO,GAAG,IAAI,CAAC;UAAE,CAAC;UAClE,OAAOF,IAAI;QACb;QACA,OAAO,CAAC,GAAGT,KAAK,EAAE;UAAE,GAAGI,IAAI;UAAEO,GAAG,EAAEP,IAAI,CAACO,GAAG,IAAI;QAAE,CAAC,CAAC;MACpD;IACA,KAAK,QAAQ;MACX,OAAOX,KAAK,CAACY,MAAM,CAAEL,CAAC,IAAKA,CAAC,CAACC,EAAE,KAAKP,MAAM,CAACE,OAAO,CAAC;IACrD,KAAK,WAAW;MAAE;QAChB,MAAM;UAAEK,EAAE;UAAEG;QAAI,CAAC,GAAGV,MAAM,CAACE,OAAO;QAClC,OAAOH,KAAK,CAACa,GAAG,CAAEN,CAAC,IAAMA,CAAC,CAACC,EAAE,KAAKA,EAAE,GAAG;UAAE,GAAGD,CAAC;UAAEI;QAAI,CAAC,GAAGJ,CAAE,CAAC;MAC5D;IACA,KAAK,OAAO;MACV,OAAO,EAAE;IACX;MACE,OAAOP,KAAK;EAChB;AACF;AAEA,OAAO,SAASc,YAAYA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EACzC,MAAM,CAAChB,KAAK,EAAEiB,QAAQ,CAAC,GAAGxB,UAAU,CAACM,WAAW,EAAE,EAAE,CAAC;;EAErD;EACAP,SAAS,CAAC,MAAM;IACd,IAAI;MACF,MAAM0B,GAAG,GAAGC,YAAY,CAACC,OAAO,CAACtB,WAAW,CAAC;MAC7C,IAAIoB,GAAG,EAAED,QAAQ,CAAC;QAAEf,IAAI,EAAE,YAAY;QAAEC,OAAO,EAAEkB,IAAI,CAACC,KAAK,CAACJ,GAAG;MAAE,CAAC,CAAC;IACrE,CAAC,CAAC,OAAOK,CAAC,EAAE;MACVC,OAAO,CAACC,IAAI,CAAC,uCAAuC,EAAEF,CAAC,CAAC;IAC1D;EACF,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA/B,SAAS,CAAC,MAAM;IACd,IAAI;MACF2B,YAAY,CAACO,OAAO,CAAC5B,WAAW,EAAEuB,IAAI,CAACM,SAAS,CAAC3B,KAAK,CAAC,CAAC;IAC1D,CAAC,CAAC,OAAOuB,CAAC,EAAE;MACVC,OAAO,CAACC,IAAI,CAAC,qCAAqC,EAAEF,CAAC,CAAC;IACxD;EACF,CAAC,EAAE,CAACvB,KAAK,CAAC,CAAC;EAEX,oBACEL,OAAA,CAACE,mBAAmB,CAAC+B,QAAQ;IAACC,KAAK,EAAEZ,QAAS;IAAAF,QAAA,eAC5CpB,OAAA,CAACC,gBAAgB,CAACgC,QAAQ;MAACC,KAAK,EAAE7B,KAAM;MAAAe,QAAA,EACrCA;IAAQ;MAAAe,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACgB;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEnC;AAACjB,EAAA,CA7BeF,YAAY;AAAAoB,EAAA,GAAZpB,YAAY;AA+B5B,OAAO,SAASqB,YAAYA,CAAA,EAAG;EAAAC,GAAA;EAC7B,MAAMC,GAAG,GAAG9C,UAAU,CAACK,gBAAgB,CAAC;EACxC,IAAIyC,GAAG,KAAKC,SAAS,EAAE,MAAM,IAAIC,KAAK,CAAC,+CAA+C,CAAC;EACvF,OAAOF,GAAG;AACZ;AAACD,GAAA,CAJeD,YAAY;AAM5B,OAAO,SAASK,eAAeA,CAAA,EAAG;EAAAC,GAAA;EAChC,MAAMJ,GAAG,GAAG9C,UAAU,CAACM,mBAAmB,CAAC;EAC3C,IAAIwC,GAAG,KAAKC,SAAS,EAAE,MAAM,IAAIC,KAAK,CAAC,kDAAkD,CAAC;EAC1F,OAAOF,GAAG;AACZ;AAACI,GAAA,CAJeD,eAAe;AAM/B,OAAO,SAASE,OAAOA,CAAA,EAAG;EAAAC,GAAA;EACxB,MAAM3C,KAAK,GAAGmC,YAAY,CAAC,CAAC;EAC5B,MAAMlB,QAAQ,GAAGuB,eAAe,CAAC,CAAC;EAElC,MAAMI,OAAO,GAAIxC,IAAI,IAAKa,QAAQ,CAAC;IAAEf,IAAI,EAAE,KAAK;IAAEC,OAAO,EAAEC;EAAK,CAAC,CAAC;EAClE,MAAMyC,UAAU,GAAIrC,EAAE,IAAKS,QAAQ,CAAC;IAAEf,IAAI,EAAE,QAAQ;IAAEC,OAAO,EAAEK;EAAG,CAAC,CAAC;EACpE,MAAMsC,SAAS,GAAGA,CAACtC,EAAE,EAAEG,GAAG,KAAKM,QAAQ,CAAC;IAAEf,IAAI,EAAE,WAAW;IAAEC,OAAO,EAAE;MAAEK,EAAE;MAAEG;IAAI;EAAE,CAAC,CAAC;EACpF,MAAMoC,SAAS,GAAGA,CAAA,KAAM9B,QAAQ,CAAC;IAAEf,IAAI,EAAE;EAAQ,CAAC,CAAC;EAEnD,MAAM8C,KAAK,GAAGhD,KAAK,CAACiD,MAAM,CAAC,CAACC,CAAC,EAAEC,EAAE,KAAKD,CAAC,GAAG,CAACC,EAAE,CAACC,MAAM,IAAI,CAAC,KAAKD,EAAE,CAACxC,GAAG,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;EAE9E,OAAO;IAAE0C,IAAI,EAAErD,KAAK;IAAE4C,OAAO;IAAEC,UAAU;IAAEC,SAAS;IAAEC,SAAS;IAAEC;EAAM,CAAC;AAC1E;;AAEA;AAAAL,GAAA,CAdgBD,OAAO;EAAA,QACPP,YAAY,EACTK,eAAe;AAAA;AAAA,IAAAN,EAAA;AAAAoB,YAAA,CAAApB,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}